\documentclass[a4paper,11pt]{article}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[portuguese]{babel}
\usepackage{graphicx}
\usepackage[pdftex]{hyperref}
\usepackage{hyphenat}

\begin{document}

\title{Concepção e Análise de Algoritmos\\ \huge \textbf{Distribuição de telecomunicações}\\[3.5cm]\normalsize  Turma 2 - Grupo C\\[0.5cm]}
\author{José Peixoto \\Pedro Moura \and 200603103\\201306843 \and ei12134@fe.up.pt \\ up201306843@fe.up.pt\\[3.5cm]}

\maketitle

\newpage
\tableofcontents
\newpage

\begin{abstract}
No âmbito da unidade curricular de Concepção e Análise de Algoritmos foi-nos proposto o desenvolvimento de uma aplicação  para planificação da distribuição de fibra óptica numa aldeia que evidencie o conhecimento e uso adequado de algoritmos sobre grafos. Reú\-nem\--se dados sobre coordenadas geográficas e distâncias através do sítio da Internet \emph{OpenStreetmap}. Após a construção de um grafo que represente a área em estudo, são-lhe aplicados algoritmos que determinam a melhor solução para o problema na minimização da distância e dos custos da instalação de fibra óptica.
\end{abstract}

\section{Formalização do problema}
\subsection{Dados de entrada}
Mapeia-se uma área, usando coordenadas geográficas que representem intersecções entre ruas ou coordenadas de casas. Para este efeito, usam-se dados extraídos do OpenStreetMap\footnote{Mapa exemplo em anexo} sobre a área seleccionada.

Construção de um grafo a partir de vértices-casa, cruzamento ou central $V$ e arestas $E$ que representam as distâncias entre as casas ligadas pelas ruas.

\begin{equation}
G<V,E> 
\end{equation}

Área máxima $A$ em $m^2$, do círculo com centro na central da companhia Telefones, resultando na exclusão das casas fora dessa selecção.\vspace{0,50cm}

Pretende-se guardar os dados em dois ficheiros distintos, \texttt{vertexes.csv}, onde temos os números identificativos das casas e intersecções de ruas, vértices do grafo e \texttt{edges.csv} onde se estabelecem as relações entre os vértices do ficheiro anterior e respectivas distâncias, por forma a caracterizar as arestas do grafo.\vspace{0,50cm}

É lido um vértice por cada linha, contendo o $id$ e são separados por ponto e vírgula dos valores posicionais $x$ e $y$ e de um valor que determina se o vértice é uma intersecção de ruas - 0 ou uma casa - 1.

Exemplo: \texttt{3;264;250;1} (o vértice número 3 é uma casa com coordenadas $x$ e $y$ de 264 e 250 píxeis respectivamente)\vspace{0,50cm}

É lida uma aresta por cada linha, sendo os primeiros dois valores os números identificativos dos vértices e o último a distância em metros entre eles.

Exemplo: \texttt{2;3;150} (o vértice número 3 dista 150 metros do vértice 2)

\subsection{Limites e condições de aplicação}

Na lista final, não poderá existir repetição de pares de vértices, ou seja, arestas repetidas e todos os vértices-casa têm de estar presentes nesta lista.

Como as coordenadas e distâncias exemplo são escritos em ficheiros separados por vírgulas de forma manual, torna-se morosa a representação de uma área muito grande, com muitos vértices e arestas, dos quais resulte num grafo de maiores dimensões. Os resultados da aplicação também estão dependentes da qualidade, precisão e realismo dos valores das coordenadas e das distâncias. 

Como requisito do algoritmo usado, referido na secção seguinte, os grafos alvo terão de ser obrigatoriamente não dirigidos, conexos e pesados.

\subsection{Situações de contorno}

\subsection{Resultados esperados}
A aplicação determinará as coordenadas dos vértices que definem as arestas seleccionadas para instalação da cablagem com fibra óptica e a distância total mínima, soma da distância destas arestas. O subconjunto das arestas resultante é acíclico, formando uma árvore de expansão mínima.

\begin{equation}
Output = Set<V_i,V_j> V_i,V_j \in V_s
\end{equation}

A função objectivo retorna a distância mínima $D$ do somatório das distancias parciais $dist$ das arestas formadas pelos pares de vértices escolhidos.
\begin{equation}
D = min(\sum_{i,j} dist(V_i,V_j))  \colon  V_i,V_j \in Output_k
\end{equation}

\section{Descrição da solução}
Após análise cuidada do enunciado, concluiu-se que um método adequado na resolução do problema passa pela utilização de um algoritmo que determine a árvore de expansão mínima, uma vez que se pretende instalar fibra óptica em todas as casas de forma o mais eficiente possível, ou seja, com menor gasto de cabo de fibra óptica, reduzindo os custos para a empresa.

O grafo alvo é construído a partir da leitura de dois ficheiros: um com vértices e outro com arestas. São feitas verificações da correcção dos valores do $id$, coordenadas $x$ e $y$ e o tipo de intersecção. De igual modo, na leitura das arestas e em cada linha, são verificados os $id$ do vértice fonte e do vértice destino e sua distância. Para garantir que se trata de um grafo não dirigido, na adição de cada aresta, $(u,v)$ é igualmente adicionada uma segunda no sentido inverso $(v,u)$.

Antes de se processar o grafo na procura de uma árvore de expansão mínima, é verificada a sua conectividade. Um grafo é conexo quando existe sempre pelo menos um caminho entre quaisquer dois vértices distintos, salvo a excepção de o grafo apenas conter um vértice.

\subsection{Kruskal}



\section{Métricas de avaliação}
Como se vai trabalhar com grafos de pequena dimensão, no teste da aplicação, julga-se necessária a criação de testes unitários que executem de forma repetida o mesmo código numa ordem de magnitude o suficientemente grande para se efectuarem medições com valores de múltiplos de segundo.

Para a medição da complexidade espacial, ter-se-á em conta a memória necessária para armazenar todas as variáveis criadas na execução do algoritmo e crescimento com o aumento da quantidade dos dados de entrada.

\section{Lista de casos de utilização}
A aplicação permite a leitura de vértices e arestas contidos em dois ficheiros e construção de um grafo não dirigido que represente um mapa de uma aldeia, com o qual se pode calcular uma árvore de expansão mínima que contemple todas as casas.

\begin{itemize}

\item Atribuição de uma área máxima em $m^2$, limitando o número de vértices que são abrangidos na árvore de expansão mínima final.

\item Adição de novas centrais e cálculo do posicionamento ideal.

\item Sobre os grafos de entrada e saída é possível consultar graficamente informação acerca do número de vértices e arestas e a distância total em metros, soma de todas as arestas.

\item Modo de visualização dos vértices com respectivos $id$ e posição dada pelos valores $x$ e $y$ em píxeis e o seu tipo \texttt{INTERSECTION}, \texttt{HOUSE}, ou \texttt{CENTRAL}, 0, 1 e 2 respectivamente.

\item Modo de visualização das arestas com respectivos $id$ de origem e de destino e distância em metros como peso da aresta.

\item Multi-plataforma, testado em sistemas Linux e Windows.

\end{itemize}

\section{Relato das principais dificuldades encontradas no desenvolvimento do trabalho}
Sentiram-se dificuldades na compreensão do enunciado e definição de fórmulas equivalentes aos dados de entrada pretendidos.

Ao contrário de uma utilização em Windows relativamente sem problemas, o código fornecido para Linux do visualizador de grafos não mantinha o processo pai vivo após o fecho da janela resultante da chamada \texttt{fork()}, pelo que esta parte teve que ser rescrita, instalando-se um \texttt{SIGCHLD} $handler$ que faz uma chamada da função de sistema \texttt{waitpid()}.

\section{Indicação do esforço dedicado por cada elemento do grupo}

Planeou-se o esqueleto do projecto e implementou-se a leitura de ficheiros em conjunto.

\subsection{José Peixoto}
\begin{itemize}
\item Responsável pela interface gráfica e da linha de comandos.
\item Incorporação do código desenvolvido nas aulas práticas.
\item Verificação da conectividade dos grafos.
\item Limpeza das intersecções desprezáveis.
\item Autor do relatório.
\end{itemize}
\emph{Graph.h}

\subsection{Pedro Moura}
\begin{itemize}
\item Adaptação do algoritmo de Kruskal.
\end{itemize}

{\let\thefootnote\relax\footnote{N.B. Este relatório não foi escrito ao abrigo do novo Acordo Ortográfico.}}

\appendix
\section{Map}
\centerline{\includegraphics[angle=90, scale=0.40]{../files/images/map.png}}
\end{document}